<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,aItemress=no">
    <title>title</title>
    <!-- 手淘移动端自适应方案 iPhone6下兼容aui 1rem=设计稿40px -->
    <!--<script type="text/javascript" src="../../script/flexible.js"></script>-->
    <!-- api样式 -->
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <!-- aui样式 -->
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/aui-skin.css" />
    <!-- 小马哥通用样式 -->
    <link rel="stylesheet" type="text/css" href="../../css/tea.css" />
    <style type="text/css">

        /*如页面需要动态滚动到底部请去除height:100%*/
		html,body {
            height: 100%;
            overflow: auto;
		}
        body {
            padding: 0.5rem;
        }
        /* .aui-list-item-text ~ .aui-list-item-text {
            margin-top: 0.25rem;
        } */
        .aui-list-item-media {
            width: 6.25rem !important;
            height: 4.25rem;
        }
        .aui-list-item-text.tea {
            /* -webkit-align-items: flex-end;
                    align-items: flex-end; */
            vertical-align: bottom;
        }
    </style>
</head>
<body id="agencies-list">
    <div class="aui-content aui-margin-b-10 tea-border-radius-10" tapmode onclick="openWinAgenciesDetail()">
        <ul class="aui-list aui-media-list">
            <li class="aui-list-item">
                <div class="aui-media-list-item-inner">
                    <div class="aui-list-item-media">
                        <img src="../image/demo1.png">
                    </div>
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title aui-font-size-16">北海阳光代办机构</div>
                            <!-- <div class="aui-list-item-right">08:00</div> -->
                        </div>
                        <div class="aui-list-item-text aui-font-size-12 tea-text-blue">
                            4.8分 非常棒
                        </div>
                        <div class="aui-list-item-text aui-font-size-12">
                            距离您多少公里
                        </div>
                        <div class="aui-list-item-text aui-font-size-12">
                            待办项目
                        </div>
                        <p class="aui-list-item-text tea aui-font-size-12 aui-pull-right">
                            ¥<span class="aui-font-size-20 tea-text-orange">188</span>起
                        </p>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div class="aui-content aui-margin-b-10 tea-border-radius-10" tapmode onclick="openWinAgenciesDetail()">
        <ul class="aui-list aui-media-list">
            <li class="aui-list-item">
                <div class="aui-media-list-item-inner">
                    <div class="aui-list-item-media">
                        <img src="../image/demo1.png">
                    </div>
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title aui-font-size-16">北海阳光代办机构</div>
                            <!-- <div class="aui-list-item-right">08:00</div> -->
                        </div>
                        <div class="aui-list-item-text aui-font-size-12 tea-text-blue">
                            4.8分 非常棒
                        </div>
                        <div class="aui-list-item-text aui-font-size-12">
                            距离您多少公里
                        </div>
                        <div class="aui-list-item-text aui-font-size-12">
                            待办项目
                        </div>
                        <p class="aui-list-item-text tea aui-font-size-12 aui-pull-right">
                            ¥<span class="aui-font-size-20 tea-text-orange">188</span>起
                        </p>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</body>
<script type="text/javascript" src="../../script/api.js" ></script>
<!-- 小马哥通用函数库 -->
<script type="text/javascript" src="../../script/tea.js"></script>
<!-- ajax相关 -->
<script type="text/javascript" src="../../script/conn.js"></script>
<!-- JavaScript模板引擎 -->
<script type="text/javascript" src="../../script/doT.min.js"></script>
<!-- HTML模板 -->
<script type="text/template" id="template">
    {{~it:value:index}}
    <div class="aui-content aui-margin-b-10 tea-border-radius-10" tapmode onclick="openWinAgenciesDetail({{=index}})">
        <ul class="aui-list aui-media-list">
            <li class="aui-list-item">
                <div class="aui-media-list-item-inner">
                    <div class="aui-list-item-media">
                        <img src="{{= website + 'admin' + value.logo}}">
                    </div>
                    <div class="aui-list-item-inner">
                        <div class="aui-list-item-text">
                            <div class="aui-list-item-title aui-font-size-16">{{=value.name}}</div>
                            <!-- <div class="aui-list-item-right">08:00</div> -->
                        </div>
                        <div class="aui-list-item-text aui-font-size-12 tea-text-blue">
                            4.8分 非常棒
                        </div>
                        {{?value.distance}}
                        <div class="aui-list-item-text aui-font-size-12">
                            距离您{{=(value.distance * 0.001).toFixed(2)}}公里
                        </div>
                        {{?}}
                        <div class="aui-list-item-text aui-font-size-12">
                            地址：{{=value.complete_address}}
                        </div>
                        <p class="aui-list-item-text tea aui-font-size-12 aui-pull-right">
                            ¥<span class="aui-font-size-20 tea-text-orange">188</span>起
                        </p>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    {{~}}
</script>

<script type="text/javascript">

/**********************************声明全局变量**********************************/
// 声明全局变量
var dom = {};
// 声明DOM对象
var data = {}, values = {};

/**********************************apiready**********************************/
apiready = function(){

    // 初始化DOM对象
    initDOM();

    // 初始化变量
    initVar();

    // 更新HTML
    updateHTML();

    // ajax请求数据
    getData();

    // 初始化监听
    initEventListener();

    // 初始化其他
    init();

};

/**********************************初始化全局变量**********************************/
// 初始化DOM对象
function initDOM(){

    dom.list = $api.byId('agencies-list');

};

// 初始化变量
function initVar(){

    data = api.pageParam.data;
    // 按照距离进行排序
    data.sort(sortDistance);

};

/**********************************ajax请求数据**********************************/
function getData(){


}


/**********************************更新全局变量**********************************/
// 更新DOM对象
function updateDOM(){


}

// 更新变量
function updateVar(){



}

/**********************************更新HTML**********************************/
function updateHTML(){

    //_alert(data);
    tea.doT(data, 'template', dom.list);

}


/**********************************初始化监听**********************************/
function initEventListener(){



}

/**********************************初始化其他模块**********************************/
function init(){



}

/**********************************广播消息**********************************/
function addEvent(){



}

/**********************************DOM响应**********************************/
function openWinAgenciesDetail(index_){

    api.openWin({
        name: 'agencies_detail_win',
        url: './agencies_detail_win.html',
        pageParam: {
            data: api.pageParam.data[index_],
            order: api.pageParam.order
        }
    });


}


/**********************************其他函数**********************************/
function sortDistance(a,b){
    // 飞鸟置顶
    if (b.agid == '4505202') {
        return true;
    }
    else {
        return false;
    };
    return a.distance - b.distance;
}
/**********************************功能模块1**********************************/


</script>
</html>