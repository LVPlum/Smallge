<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{text-align:center;background-color:#fff}.img:before{font-size:3rem;margin:.5rem}i:before{font-size:1.6rem;color:#ccc;line-height:1}i~i{margin-left:.75rem}section{margin:1rem auto;width:13.75rem}.aui-row-padded{margin-left:-.375rem;margin-right:-.375rem}.aui-col-xs-6{padding:.75rem .375rem 0!important}.aui-btn{height:1.7rem;line-height:1.7rem;font-size:.7rem;color:#666;border-radius:.85rem;border:1px solid #ccc;background-color:#fff}textarea{margin:0;padding:.5rem;height:3.75rem;border:1px solid #ccc;border-radius:.25rem;background-color:#f7f7f7}footer{width:15rem;margin:.75rem auto}footer .aui-btn{height:2.3rem;line-height:2.3rem;border-radius:2.3rem;color:#fff;background-color:#ed7474}.star-active:before{color:#fc3}.tab-active{color:#e53838;border:1px solid #e53838;background-color:#fcebeb}</style> </head> <body> <div id=app v-cloak> <header> <i class="aui-iconfont img" :class=typeArr[type].icon :style=" 'color:' + typeArr[type].color"></i> <p class="tea-text-title aui-font-size-16" style="margin:.325rem 0">{{typeArr[type].title}}</p> <p class=tea-text-gray>评论可获得 <span class=tea-text-orange>30积分</span> 哦</p> <div style="margin:1.25rem auto .75rem"> <i class="aui-iconfont tea-icon-star" v-for="index in 5" :class="{'star-active': index <= star}" tapmode @click=setStar(index)></i> </div> <p class="tea-text-gray aui-font-size-12">您的评论会让小马哥审车做得更好</p> </header> <section> <p class=aui-text-left>请选择标签</p> <div class=aui-grid> <div class="aui-row aui-row-padded"> <div class=aui-col-xs-6 tapmode @click=setTab(item) v-for="(item, index) in tabNow"> <div class="aui-btn aui-btn-block" :class="{'tab-active': ~tabSettedNow.indexOf(item)}">{{item}}</div> </div> </div> </div> </section> <section> <textarea v-model=opinion placeholder=请输入其他建议></textarea> </section> <footer> <div class="aui-btn aui-btn-block" :class="{'tea-active' : !errorMsg}" tapmode @click=submit()>提交评价</div> </footer> </div> </body> <script src=../../script/api.js></script> <script src=../../script/fastclick.min.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},initModule(),initEventListener()}function initModule(){}function initEventListener(){}var dom={},vm=null;apiready=function(){vm=new Vue({el:"#app",data:{type:api.pageParam.orderType,typeArr:{check:{title:"网约审车",icon:"tea-icon-check",color:"#41a4ec"},insure:{title:"车辆保险",icon:"tea-icon-insure",color:"#ff855e"},tel:{title:"话费充值",icon:"tea-icon-tel",color:"#ff855e"},agency:{title:"找代办",icon:"tea-icon-agency",color:"#00be9b"},join:{title:"加盟申请",icon:"tea-icon-agency",color:"#00be9b"},vip:{title:"VIP",icon:"tea-icon-vip",color:"#ffc50f"},etc:{title:"ETC",icon:"tea-icon-etc",color:"#4874dc"},oil:{title:"超值加油",icon:"tea-icon-oil",color:"#f5b35e"}},tab:{bad:["销售服务差","车辆不满意","时间慢","价格不合理"],good:["销售服务好","车辆满意","时间快","公司值得信赖"]},tabSetted:{bad:[],good:[]},star:0,opinion:""},methods:{setStar:function(t){this.star=t},setTab:function(t){var i=this.tabSettedNow,e=i.indexOf(t);~e?i.splice(e,1):i.push(t)},submit:function(){if(this.errorMsg)return api.toast({msg:this.errorMsg,duration:2e3,location:"middle"}),!1;var t=this.tabSettedNow.toString();$api.post(website+"judge_api.php?action=pj",{values:{ID:$api.getStorage("ID"),token:$api.getStorage("token"),orderid:api.pageParam.orderId,order_type:api.pageParam.orderType,star:vm.star,tab:t,content:vm.opinion}},function(t){if(!t)return api.toast({msg:"网络未连接，请检查后重试",duration:2e3,location:"middle"}),!1;1==t.succ&&setTimeout(api.closeWin(),1e3),api.toast({msg:t.msg,duration:2e3,location:"middle"})})}},computed:{isGood:function(){return this.star>3||0==this.star?"good":"bad"},tabNow:function(){return this.tab[this.isGood]},tabSettedNow:function(){return this.tabSetted[this.isGood]},errorMsg:function(){var t=new tea.checkRule;return t.add(this.star,[{condition:"isTrue",errorMsg:"请至少选择一颗星"}]),t.start()}},watch:{}}),init()}</script> </html>