<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <link rel=stylesheet type=text/css href=../../css/account.css /> <style type=text/css>label input{margin-left:-3rem!important}</style> </head> <body> <div id=app v-cloak> <header>请设置您的密码</header> <label for=password> <i class="aui-iconfont tea-icon-lock icon-left"></i> <input id=password :type="display? 'text' : 'password'" placeholder=请设置您的密码 :class="{ 'center': password }" v-model=password @keyup.enter=submit> <i class="aui-iconfont tea-icon-display icon-right" :class="{ 'aui-hide' : !password}" @click=toggleDisplay()></i> </label> <footer> <div class="aui-btn aui-btn-block tea-btn-submit" :class="{'tea-active' : !errorMsg}" @click=submit()>完成</div> </footer> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script src=../../script/fastclick.min.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},vm=new Vue({el:"#app",data:{password:"",display:!1,url:"reset"==api.pageParam.type?"user_api.php?action=forgot":"user_api.php?action=setpsw"},methods:{toggleDisplay:function(){this.display=!this.display},submit:function(){if(vm.errorMsg)return api.toast({msg:vm.errorMsg,duration:2e3,location:"middle"}),!1;api.showProgress({style:"default",animationType:"fade",title:"努力加载中...",text:"请稍候...",modal:!0}),$api.post(website+vm.url,{values:{ID:$api.getStorage("ID"),token:$api.getStorage("token"),password:vm.password,tel:api.pageParam.tel,smscode:api.pageParam.code}},function(t){return api.hideProgress(),t?1==t.succ?"reset"==api.pageParam.type?(api.toast({msg:"密码重置成功",duration:2e3,location:"middle"}),setTimeout(function(){api.openWin({name:"login_win",url:"./login_win.html",pageParam:{tel:api.pageParam.tel}})},2e3),!0):(api.closeToWin({name:"main_win",animation:{type:"none"}}),!0):void api.toast({msg:t.msg,duration:2e3,location:"middle"}):(tea.toast("ajax"),!1)})}},computed:{errorMsg:function(t){var a=new tea.checkRule;return a.add(this.password,[{condition:"minLength:6",errorMsg:"请输入不少于六位的密码"}]),a.start()}}}),initModule(),initEventListener()}function initModule(){}function initEventListener(){}function getData(){}var dom={},vm=null;apiready=function(){init()}</script> </html>