<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>footer{margin:2.5rem 1.125rem}</style> </head> <body> <div id=app v-cloak> <ul class="aui-list aui-form-list"> <li class="aui-list-item tea-bg-default"> <div class=aui-list-item-inner> <div class=aui-list-item-title style=height:2.625rem;line-height:2.625rem> 请输入绑定的手机号码 </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-input> <input id=tel type=tel placeholder=请输入手机号码 maxlength=11 v-model=tel> </div> </div> </li> </ul> <footer> <div class="aui-btn aui-btn-block tea-btn-submit" :class="{'tea-active' : tea.checkPhone(tel)}" @click=sumbit()>提交</div> </footer> </div> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){dom={tel:$api.byId("tel")},updateHTML(),initModule(),initEventListener()}function initModule(){var e=$api.offset(dom.tel),t=api.require("UIInput");t.open({rect:{x:e.l,y:e.t+1,w:e.w,h:e.h-1},styles:{bgColor:"#fff",size:16,color:"#333",placeholder:{color:"#ccc"}},autoFocus:!0,maxRows:1,placeholder:"请输入手机号码",keyboardType:"number",fixedOn:api.frameName},function(e,a){e&&("show"==e.eventType&&t.value({msg:vm.tel}),t.value(function(e,a){e&&(e.msg.length>11&&t.value({msg:e.msg.substr(0,11)}),vm.tel=e.msg)}))})}function initEventListener(){}function updateHTML(){}var dom={},vm=null;Vue.prototype.tea=tea,apiready=function(){var e="";e=$api.getStorage("tel")?$api.getStorage("tel"):e,e=api.pageParam.tel?api.pageParam.tel:e,vm=new Vue({el:"#app",data:{tel:e,isOK:!1},methods:{sumbit:function(){var e=vm.check();if(e)return api.toast({msg:e,duration:2e3,location:"middle"}),!1;api.openWin({name:"message_win",url:"../unit/message_win.html",bounces:!1,pageParam:{tel:vm.tel,type:"reset"}})},check:function(e){var t=new tea.checkRule;return t.add(vm.tel,[{condition:"isPhone",errorMsg:"请输入格式正确的手机号码"}]),t.start()}},watch:{}}),init()}</script> </html>