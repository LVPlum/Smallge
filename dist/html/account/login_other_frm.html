<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <link rel=stylesheet type=text/css href=../../css/account.css /> <style type=text/css></style> </head> <body> <div id=app v-cloak> <header>{{type == 'code'? '短信验证码登录' : '小马哥密码登录'}}</header> <label for=tel> <i class="aui-iconfont tea-icon-mobile icon-left"></i> <input id=tel type=tel placeholder=请输入手机号 maxlength=11 :class="{ 'center': tel }" :value=tel @input="tel = $api.trimAll($event.target.value)"> <i class="aui-iconfont tea-icon-close icon-right" :class="{ 'aui-hide' : !tel}" @click="clear('tel')"></i> </label> <label for=password v-show="type == 'password'"> <i class="aui-iconfont tea-icon-lock icon-left"></i> <input id=password :type="display? 'text' : 'password'" placeholder=请输入您的密码 maxlength=15 :class="{ 'center': password }" v-model=password @keyup.enter=submit> <i class="aui-iconfont tea-icon-display icon-right" :class="{ 'aui-hide' : !password}" @click=toggleDisplay()></i> </label> <p class="tea-text-blue aui-font-size-16 aui-text-left aui-margin-l-10 aui-margin-t-15"> <span @click=toggleType()>{{type == 'code'? '用密码登录' : '用验证码登录'}}</span> <span @click=forgetPassword() v-show="type == 'password'" class=aui-pull-right>忘记密码?</span> </p> <footer> <div class="aui-btn aui-btn-block tea-btn-submit" :class="{'tea-active' : !errorMsg}" @click=submit()>{{type == 'code'? '下一步' : '登录'}}</div> </footer> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script src=../../script/fastclick.min.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/account.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},vm=new Vue({el:"#app",data:{display:!1,type:"password",password:"",tel:api.pageParam.tel?api.pageParam.tel:""},methods:{clear:function(t){this[t]=""},toggleType:function(){"code"==this.type?this.type="password":this.type="code"},toggleDisplay:function(){this.display=!this.display},forgetPassword:function(){api.openWin({name:"password_find_win",url:"./password_find_win.html",pageParam:{tel:vm.tel},reload:!0})},submit:function(){if(vm.errorMsg)return api.toast({msg:vm.errorMsg,duration:2e3,location:"middle"}),!1;"code"==this.type?api.openWin({name:"message_win",url:"../unit/message_win.html",pageParam:{type:"login",tel:vm.tel},reload:!0}):account.loginByPassword()}},computed:{errorMsg:function(t){var e=new tea.checkRule;return e.add(this.tel,[{condition:"isPhone",errorMsg:"请输入正确的手机号码"}]),"password"==this.type&&e.add(this.password,[{condition:"minLength:6",errorMsg:"密码至少6位"}]),e.start()}},filters:{formatTel:function(t){return t}}}),initModule(),initEventListener()}function initModule(){}function initEventListener(){}function getData(){}var dom={},vm=null;apiready=function(){init()}</script> </html>