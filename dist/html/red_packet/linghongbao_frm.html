<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <title></title> <link rel=stylesheet type=text/css href=../../css/aui_old.css /> <link rel=stylesheet type=text/css href=../../css/common.css /> </head> <style type=text/css>.ac{display:inline}.ac .m{font-size:38px;color:#ed4040}.ac .y{color:#999}</style> <body> <div class="aui-content aui-text-center"> <p class=aui-padded-10 id=msg></p> <img class="aui-img-object aui-img" id=sendlogo src=../../image/nologo.png style=width:68px;height:68px;border-radius:80%> <div class=aui-img-body style=padding-bottom:10px> <span id=sendname></span> </div> <div class=ac><span class=m id=m></span><span class=y>元</span></div> <div class=aui-btn-row> <div class="aui-btn aui-btn-block aui-btn-danger" id=bottom onclick=postdate()>领取这个红包</div> </div> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script>function loaddate(){var a=api.pageParam.hongbaoID;showp("数据加载中...","请稍候..."),api.ajax({url:website+"hongbao.php?action=seehongbaoinfo",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{hongbaoID:a}}},function(a,o){a?a.errmsg||("1"==a.isuse?($api.html($api.byId("msg"),a.msg),$api.html($api.byId("sendname"),a.sendname+"发的红包"),$api.html($api.byId("m"),"￥"+a.hongbao),$api.byId("sendlogo").src=a.sendlogo,$api.removeCls(bottom,"aui-btn-danger"),$api.html(bottom,"这个红包已经领过了"),api.hideProgress()):a.sendID==$api.getStorage("ID")?($api.html($api.byId("msg"),a.msg),$api.html($api.byId("sendname"),a.sendname+"发的红包"),$api.html($api.byId("m"),"￥"+a.hongbao),$api.byId("sendlogo").src=a.sendlogo,$api.removeCls(bottom,"aui-btn-danger"),$api.html(bottom,"不能领自己发的红包"),api.hideProgress()):($api.html($api.byId("msg"),a.msg),$api.html($api.byId("sendname"),a.sendname+"发的红包"),$api.html($api.byId("m"),"￥"+a.hongbao),$api.byId("sendlogo").src=a.sendlogo,api.hideProgress())):(api.hideProgress(),api.alert({msg:"错误码："+o.code+"；错误信息："+o.msg+"网络状态码："+o.statusCode}))})}function postdate(){var a=api.pageParam.hongbaoID;api.ajax({url:website+"hongbao.php?action=linghongbao",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{hongbaoID:a}}},function(a,o){if(a){if(1==a.succ){var e=$api.byId("bottom");$api.removeCls(e,"aui-btn-danger"),$api.html(e,"已经成功领取了这个红包"),$api.rmEvt(e,"click",function(){}),api.sendEvent({name:"showhongbao"})}}else api.alert({msg:"错误码："+o.code+"；错误信息："+o.msg+"网络状态码："+o.statusCode})})}apiready=function(){api.parseTapmode(),loaddate()}</script> </html>