<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title>title</title> <link rel=stylesheet type=text/css href=../../css/aui_old.css /> <style type=text/css>body{background:#fff;padding:1rem}.aui-content .aui-list-item-label .cp{display:inline;width:30%;overflow:auto;border:1px dashed #cacaca;text-align:center}</style> </head> <body> <div class="aui-content aui-margin-b-15"> <ul class="aui-list aui-form-list"> <li class="aui-list-item aui-margin-t-15"> <div class=aui-list-item-inner id=setion> <div class=aui-list-item-input id=in> <input type=text placeholder="" id=val tapmode> </div> </div> </li> </ul> </div> <div class="aui-content aui-margin-b-15 aui-content-padded"> <div class="aui-btn aui-btn-danger aui-btn-block" tapmode onclick=postdate() id=postdate>提交修改</div> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script src=../../script/aui-toast.js></script> <script>function cplocal(){api.openWin({name:"cpselect_win",url:"./cpselect_win.html",vScrollBarEnabled:!1})}function postdate(){var i=$api.val($api.byId("val"));if("carnum"==item){var a=$api.val($api.byId("cph"));if(""==a||""==i)return api.alert({msg:"车牌号码不能为空"}),!1}"scremind"!=item&&"bxremind"!=item||(i=$api.byId("checkbox").checked?0:1),api.ajax({url:website+"getmycar.php?action=chcarval",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{userid:userid,cph:a,val:i,carid:carid,item:item}}},function(i,a){i&&(1==i.succ?(api.sendEvent({name:"reflash"}),$api.removeCls($api.byId("postdate"),"aui-btn-danger"),showDefault()):api.alert({msg:i.msg}))})}function showDefault(){toast.success({title:"修改成功"}),setTimeout(function(){api.closeWin()},2e3)}function selecttime(i){api.openFrame({name:"selecttime",url:"selecttime_frm.html",pageParam:{pagetype:"ntime"},rect:{x:0,y:320,w:api.frameWidth,h:api.winHeight-320},bounces:!1,bgColor:"rgba(0,0,0,0)",vScrollBarEnabled:!1,hScrollBarEnabled:!1})}var itname=null,item=null,chval=null,carid=null,userid=null;apiready=function(){api.parseTapmode(),itname=api.pageParam.itname,item=api.pageParam.item,chval=api.pageParam.chval,carid=api.pageParam.carid,userid=$api.getStorage("ID"),$api.val($api.byId("val"),chval),$api.attr($api.byId("val"),"placeholder","修改"+itname),api.addEventListener({name:"selectzm"},function(i,a){var e=$api.byId("cph"),t=i.value.zm1+i.value.zm2;$api.val(e,t)}),api.addEventListener({name:"selecttime"},function(i,a){var e=$api.byId("val"),t=i.value.time1+"-"+i.value.time2+"-"+i.value.time3;$api.val(e,t)});i="";if("carnum"==item){var i="";i='<div class="aui-list-item-label">',i+='<input type="text" class="aui-input cp" id="cph" value="'+chval.substring(0,2)+'" readonly="readonly" onclick="cplocal()"/>',i+="</div>",i+='<div class="aui-list-item-input">',i+='<input type="text" placeholder="修改车牌号码" id="val" value="'+chval.substring(2)+'" maxlength="5" oninput="value=value.toUpperCase()">',i+="</div>",$api.html($api.byId("setion"),i)}"carlicense"==item&&$api.attr($api.byId("val"),"maxlength","20"),"cartype"==item&&(i+='<select id="val" >',i+="1"==chval?'<option value="1" selected>蓝牌</option>':'<option value="1">蓝牌</option>',i+="2"==chval?'<option value="2" selected>黄牌</option>':'<option value="2">黄牌</option>',i+="</select>",$api.html($api.byId("in"),i)),"scextime"!=item&&"bxextime"!=item||($api.attr($api.byId("val"),"readonly","readonly"),$api.attr($api.byId("val"),"onclick","selecttime()")),"scremind"==item&&(i=0==chval?'<div class="aui-list-item-title">审车到期自动提醒</div><div class="aui-list-item-right"><input type="checkbox" class="aui-switch" id="checkbox" checked></div>':'<div class="aui-list-item-title">审车到期自动提醒</div><div class="aui-list-item-right"><input type="checkbox" class="aui-switch" id="checkbox"></div>',$api.html($api.byId("setion"),i)),"bxremind"==item&&(i=0==chval?'<div class="aui-list-item-title">保险到期自动提醒</div><div class="aui-list-item-right"><input type="checkbox" class="aui-switch" id="checkbox" checked></div>':'<div class="aui-list-item-title">保险到期自动提醒</div><div class="aui-list-item-right"><input type="checkbox" class="aui-switch" id="checkbox"></div>',$api.html($api.byId("setion"),i))};var toast=new auiToast({})</script> </html>