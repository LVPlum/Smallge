<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <title></title> <link rel=stylesheet type=text/css href=../../css/aui_old.css /> <link rel=stylesheet type=text/css href=../../css/common.css /> </head> <style type=text/css></style> <body> <p class="aui-padded-10 aui-text-center">设置保险到期提醒</p> <div class="aui-content aui-card"> <div class=aui-form> <div class=aui-input-row> <span class=aui-input-addon>保险到期时间</span> <input type=text class=aui-input placeholder=点击选择保险到期时间 id=btime onclick='selecttime("btime")' readonly=readonly /> </div> <div class=aui-input-row> <span class=aui-input-addon>保险差不多到期时自动通知</span> <input type=checkbox class="aui-switch aui-pull-right" id=ck2 onclick=getck(2) checked=checked> </div> <div class=aui-content id=rd2> </div> </div> </div> <div class=aui-btn-row> <div class="aui-btn aui-btn-block aui-btn-danger" tapmode onclick=postdate()>确定</div> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script>function sethtml(a){var e="";return e+='<div class="aui-form" id="rdo'+a+'">',e+='<div class="aui-input-row">',e+='<label class="aui-input-addon">提前三天每天通知</label>',e+='<input class="aui-pull-right aui-radio" type="radio" name="rad'+a+'" value="3" checked>',e+="</div>",e+='<div class="aui-input-row">',e+='<label class="aui-input-addon">提前一周每天通知</label>',e+='<input class="aui-pull-right aui-radio" type="radio" name="rad'+a+'" value="7">',e+="</div>",e+='<div class="aui-input-row">',e+='<label class="aui-input-addon">提前一个月每天通知</label>',e+='<input class="aui-pull-right aui-radio" type="radio" name="rad'+a+'" value="30">',e+="</div>",e+="</div>"}function getck(a){if($api.byId("ck"+a).checked)$api.html($api.byId("rd"+a),sethtml(a));else{var e=$api.byId("rdo"+a);$api.remove(e)}}function selecttime(a){api.openFrame({name:"selecttime",url:"selecttime_frm.html",pageParam:{pagetype:a},rect:{x:0,y:320,w:api.frameWidth,h:api.winHeight-320},bounces:!1,bgColor:"rgba(0,0,0,0)",vScrollBarEnabled:!1,hScrollBarEnabled:!1})}function getradselect(a){var e=document.getElementsByName("rad"+a);for(i=0;i<e.length;i++)if(e[i].checked)return e[i].value}function postdate(){var a=""==$api.val($api.byId("ck2"))?"0":getradselect(2),e=$api.val($api.byId("btime"));if(""==e)return api.toast({msg:"时间没有选择，请选择时间"}),!1;api.sendEvent({name:"addbtime",extra:{n1:e,n2:a}}),api.closeWin()}apiready=function(){api.parseTapmode(),$api.html($api.byId("rd2"),sethtml(2)),api.addEventListener({name:"selecttime"},function(a,e){var i=$api.byId(a.value.pagetype),t=a.value.time1+"-"+a.value.time2+"-"+a.value.time3;$api.val(i,t)})}</script> </html>