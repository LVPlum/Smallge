<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{width:100%;height:100%;overflow:auto}.body-bg{position:relative;margin:0;overflow:hidden;background-color:#000;background-position:center;background-repeat:no-repeat;background-size:100%}</style> </head> <body id=body class=body-bg tapmode onclick=openFrame()> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/doT.min.js></script> <script type=text/template id=template> </script> <script>function initVar(){dom={},data={},values={type:"",isIOS:"ios"==api.systemType},updateHTML()}function initModule(){videoPlayer=api.require("videoPlayer")}function initEventListener(){videoPlayer.addEventListener({name:"click"},function(a,e){a?("playing"==values.type&&videoPlayer.pause(),openFrame()):alert(JSON.stringify(e))}),videoPlayer.addEventListener({name:"play"},function(a,e){a?(values.type=a.eventType,flag2&&"playing"==values.type&&a.current>0&&(flag2=!1,videoPlayer.setRect({rect:{y:0}}),api.hideProgress()),"complete"==values.type&&openFrame()):alert(JSON.stringify(e))})}function getData(){}function updateVar(){}function updateDom(){}function updateHTML(){}function openFrame(){api.openFrame({name:"video_con_frm",url:"./video_con_frm.html",rect:{x:0,y:0,w:api.frameWidth,h:api.frameHeight},pageParam:api.pageParam,bounces:!1,bgColor:"rgba(0,0,0,0)",vScrollBarEnabled:!0,hScrollBarEnabled:!0})}function openPlayer(){var a=api.pageParam.bg?api.winHeight:0;if("android"==api.systemType)api.pageParam.thumbnail;videoPlayer.open({path:api.pageParam.url,autoPlay:!1,fixedOn:"video_frm",rect:{x:0,y:a,w:api.winWidth,h:api.winHeight}},function(a,e){api.systemType;a.status&&(videoPlayer.start(),0==api.pageParam.autoPlay&&(videoPlayer.pause(),openFrame()))}),initEventListener()}var dom={},data={},values={},videoPlayer=null,flag=!0,flag2=!0;apiready=function(){if(api.execScript({name:"main_win",script:'keybackType = "video";'}),initVar(),initModule(),1==api.pageParam.bg){var a=$api.byId("body");if($api.css(a,"background-image: url("+api.pageParam.thumbnail+")"),1!=api.pageParam.offline)return void openPlayer();api.showProgress({style:"default",animationType:"fade",title:"视频加载中...",text:"请稍候...",modal:!1}),api.download({url:api.pageParam.url,report:!0,cache:!0,allowResume:!0},function(a,e){if(flag&&a.percent<100)return flag=!1,void openPlayer();flag&&1==a.state&&(flag=!1,api.pageParam.url=a.savePath,openPlayer())})}else openPlayer();getData()}</script> </html>