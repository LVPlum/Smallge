<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title>个人主页</title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{height:100%;overflow:auto;background-color:#f2f5f8;color:#333}.introduce{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}</style> </head> <body> <div class="aui-card-list aui-margin-b-10" style=line-height:3.55> <div class=aui-card-list-content> <ul class="aui-list aui-media-list"> <li class="aui-list-item aui-list-item-middle" tapmode onclick=openWinInfo()> <div class=aui-media-list-item-inner> <div class=aui-list-item-media style=width:3.25rem;height:3.5rem> <img id=user-head-img src="" class=aui-img-round style=height:100%;width:100%> </div> <div class="aui-list-item-inner aui-list-item-arrow"> <div class=aui-list-item-text> <div class="aui-list-item-title aui-font-size-16">个人主页</div> <div class="aui-list-item-right aui-font-size-14">进入</div> </div> </div> </div> </li> </ul> </div> </div> <div class="aui-content aui-margin-b-15"> <ul class="aui-list aui-list-in"> <li class=aui-list-item tapmode onclick=openWinLogo()> <div class="aui-list-item-inner aui-list-item-arrow"> <div class=aui-list-item-title>头像</div> <div class="aui-list-item-right aui-font-size-14"> <div>修改</div> </div> </div> </li> <li class=aui-list-item tapmode onclick=openWin(2,pageParam)> <div class="aui-list-item-inner aui-list-item-arrow"> <div class=aui-list-item-title>昵称 </div> <div class="aui-list-item-right aui-font-size-14"> <div id=nickname></div> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title>手机号码</div> <div class="aui-list-item-right aui-font-size-14"> <div id=telphone></div> </div> </div> </li> <li class=aui-list-item tapmode onclick=openWin(3,pageParam)> <div class="aui-list-item-inner aui-list-item-arrow"> <div class=aui-list-item-title>我的二维码</div> <div class="aui-list-item-right aui-font-size-14"> </div> </div> </li> <li class=aui-list-item tapmode onclick=openWin(4,pageParam)> <div class="aui-list-item-inner aui-list-item-arrow"> <div class=aui-list-item-title>个人简介</div> <div class="aui-list-item-right aui-font-size-14"> <div id=introduce class=introduce></div> </div> </div> </li> </ul> </div> </body> <script src=../../script/api.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/doT.min.js></script> <script type=text/template id=template></script> <script>function closeWin(){api.closeWin()}function _ajax(a,e,i,n){i=i||{},void 0!==$api.getStorage("token")?api.ajax({url:a,method:"post",data:{values:e,files:i}},function(a,e){a?n(a):api.toast({msg:"请求超时,请联系管理员~"})}):(api.openWin({name:"login",url:"../account/login_win.html"}),api.toast({msg:"请先登陆~",duration:2e3,location:"middle"}))}function openWin(a,e){if(e=e||{},1===a){var i="修改头像",n="./personal_data_win.html";e.type=a}else if(2===a){var i="修改昵称",n="./personal_data_win.html";e.type=a}else if(3===a){var i="我的二维码",n="./personal_data_win.html";e.type=a}else if(4===a){var i="个人简介",n="./personal_data_win.html";e.type=a}else var i="个人详情页",n="./personal_detail_page_win.html";_openWin(i,n,e)}function openWinLogo(){tea.openWin({name:"logo",url:"./setmylogo_win.html"})}function openWinInfo(){api.openWin({name:"friendinfo_win",url:"../friends/friendinfo_win.html",bounces:!1,pageParam:{id:$api.getStorage("ID")}})}apiready=function(){api.parseTapmode();var a=website+"api.php?action=get_id_by_my_info",e={fid:$api.getStorage("ID")};_ajax(a,e,{},function(a){window.pageParam.id=a.ID,window.pageParam.nickname=a.nickname,window.pageParam.token=a.token,window.pageParam.telphone=a.telphone,window.pageParam.img=a.img,window.pageParam.profile=a.profile;var e=a.nickname,i=a.telphone,n=a.token,t=a.ID,o=a.img,p=(a.bimg,a.profile||"未填写");a.tx,a.imglist;$api.setStorage("nickname",e),$api.setStorage("telphone",i),$api.setStorage("token",n),$api.setStorage("id",t),$api.setStorage("img",o),$api.attr($api.byId("user-head-img"),"src",o),$api.html($api.byId("nickname"),e),$api.html($api.byId("telphone"),i),$api.html($api.byId("introduce"),p)}),api.addEventListener({name:"save_personal_data"},function(i,n){i&&_ajax(a,e,{},function(a){window.pageParam.id=a.ID,window.pageParam.nickname=a.nickname,window.pageParam.token=a.token,window.pageParam.telphone=a.telphone,window.pageParam.img=a.img,window.pageParam.profile=a.profile;var e=a.nickname,i=a.telphone,n=a.token,t=a.ID,o=a.img,p=(a.bimg,a.profile||"未填写");a.tx,a.imglist;$api.setStorage("nickname",e),$api.setStorage("telphone",i),$api.setStorage("token",n),$api.setStorage("id",t),$api.setStorage("img",o),$api.attr($api.byId("user-head-img"),"src",o),$api.html($api.byId("nickname"),e),$api.html($api.byId("telphone"),i),$api.html($api.byId("introduce"),p)})})};var dom={},data={},values={},pageParam={}</script> </html>