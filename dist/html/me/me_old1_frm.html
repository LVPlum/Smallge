<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title>我</title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{height:100%;overflow:auto}header{text-align:center;width:100%;height:10.9rem;color:#fff;background-color:#39f;position:relative;padding:2.2rem .75rem}.img-box{width:3.8rem;height:3.8rem;object-fit:cover;margin:0 auto;border:.12rem solid rgba(255,255,255,.3);border-radius:9999px}.img-box img{width:100%;height:100%;border-radius:50%}.message{margin-top:-1.7rem}.border{width:1.6rem;height:.85rem;line-height:.85rem;border:1px solid #fff;border-radius:30px}.bar{width:90%;height:3.4rem;position:relative;margin-top:-1.7rem;background-color:#fff;line-height:normal;border-radius:.2rem;-moz-box-shadow:0 .25rem 2rem #c6e2f1;-webkit-box-shadow:0 .25rem 2rem #c6e2f1;box-shadow:0 .25rem 2rem #c6e2f1}.line:after{content:'';height:1.7rem;border-left:1px solid #e5e5e5;position:absolute;top:.8rem;right:0}.aui-bar-btn .aui-bar-btn-item{border:none;line-height:inherit}.aui-list .aui-list-item-inner{-webkit-justify-content:flex-start;justify-content:flex-start}.icon{font-size:1.1rem!important}</style> </head> <body> <div id=app v-cloak> <header> <div class="message aui-pull-right"> <i class="aui-iconfont tea-icon-message aui-hide" style=font-size:1.15rem></i> </div> <div class=img-box tapmode @click="goTo('personal')"> <img :src=" userInfo.avatar ? userInfo.avatar : '../../image/me/default_male.png' " alt=个人头像> </div> <div class="info aui-margin-t-10"> <div class=user-name> <span class="aui-font-size-16 aui-margin-r-5">{{ userInfo.nickname ? userInfo.nickname : '小马哥' }}</span> <span class="tea-font-size-11 border" tapmode @click="goTo('tx')">{{ userInfo.tx }}</span> </div> <div class="aui-font-size-14 aui-margin-t-5" style=opacity:.7>{{ userInfo.phoneNum.replace(/(\d{3})\d{5}(\d{3})/,'$1*****$2') }}</div> </div> </header> <div class="bar aui-bar-btn"> <div class="aui-bar-btn-item line" tapmode @click="goTo('benefit')"> <span class="aui-iconfont tea-icon-coupon" style=font-size:1.4rem></span> <p class="aui-font-size-12 tea-text-gray">我的好处</p> </div> <div class=aui-bar-btn-item tapmode @click="goTo('invite')"> <span class="aui-iconfont tea-icon-invite" style=font-size:1.4rem></span> <p class="aui-font-size-12 tea-text-gray">邀请有奖</p> </div> </div> <section style=margin-top:.75rem> <ul class="aui-list aui-list-noborder"> <li v-for="val in items" class=aui-list-item tapmode @click=goTo(val.func) style=margin-left:.75rem;padding:0> <div class="aui-list-item-inner aui-list-item-arrow"> <i class="aui-iconfont icon" :class=val.icon :style="{color: val.color}"></i> <div class="aui-list-item-title aui-margin-l-10">{{ val.title }}</div> </div> </li> </ul> </section> </div> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},vm=new Vue({el:"#app",data:{items:[{title:"我的钱包",icon:"tea-icon-wallet",color:"#FFCC66",func:"wallet"},{title:"我的订单",icon:"tea-icon-order",color:"#FF9999",func:"order"},{title:"车辆管理",icon:"tea-icon-car",color:"#6699FF",func:"car"},{title:"系统设置",icon:"tea-icon-setting",color:"#6699CC",func:"setting"},{title:"意见反馈",icon:"tea-icon-feedback",color:"#33CCCC",func:"feedback"},{title:"问题解答",icon:"tea-icon-question",color:"#6699FF",func:"question"}],userInfo:{avatar:"",nickname:"",tx:"散兵",phoneNum:"66666666666"}},methods:{goTo:function(e){switch(e){case"wallet":openWinWallet();break;case"order":openWinOrder();break;case"car":openWinCarManage();break;case"setting":openWinSetting();break;case"feedback":openWinFeedback();break;case"question":openWinQuestion();break;case"benefit":openWinBenefit();break;case"invite":openWinInvite();break;case"personal":openWinPersonal();break;case"tx":openWinIntegral();break;case"etc":openWinEtc();break;default:toast()}}},computed:{}}),getData(),initModule(),initEventListener()}function initModule(){}function initEventListener(){api.addEventListener({name:"loginSuccess"},function(e,n){getData()})}function getData(){tea.showp("数据加载中..."),api.ajax({url:website+"getmyinfo.php",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{token:$api.getStorage("token")}}},function(e,n){api.hideProgress(),e&&($api.setStorage("vipcount",e.vipcount),$api.setStorage("mymoney",e.mymoney),$api.setStorage("img",e.img),$api.setStorage("ac",e.ac),$api.setStorage("tx",e.tx),$api.setStorage("lastcheck",e.lastcheck),$api.setStorage("is_set_sex",e.is_set_sex),updataInfo())})}function updataInfo(){vm.userInfo.avatar=$api.getStorage("img"),vm.userInfo.nickname=$api.getStorage("nickname"),vm.userInfo.tx=$api.getStorage("tx"),vm.userInfo.phoneNum=$api.getStorage("telphone")?$api.getStorage("telphone"):"66666666666"}function openWinIntegral(){tea.openWin({name:"integral_win",url:"./integral_win.html",pageParam:{}})}function openWinWallet(){tea.appleCheck()?api.toast({msg:"级别尚未达到要求",duration:2e3,location:"middle"}):tea.openWin({name:"my_wallet_win",url:"../wallet/my_wallet_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinOrder(){tea.openWin({name:"my_order_win",url:"../order/my_order_win.html",pageParam:{}})}function openWinCarManage(){tea.openWin({name:"car_manage_win",url:"../car_manage/car_manage_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinSetting(){tea.openWin({name:"setting_win",url:"../setting/setting_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinFeedback(){api.openWin({name:"report_index_win",url:"../report/index_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinQuestion(){api.openWin({name:"wd_index_new_win",url:"../wd/wd_index_new_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinBenefit(){if(tea.appleCheck())return tea.toast("disable"),!1;tea.openWin({name:"benefit_win",url:"../benefit/benefit_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinInvite(){tea.openWin({name:"invite_win",url:"../invite/invite_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinPersonal(){tea.openWin({name:"personal_info_win",url:"./personal_info_win.html",bounces:!1,pageParam:{key:"value"}})}function openWinEtc(){tea.openWin({name:"etc_win",url:"../etc/etc_win.html",bounces:!1,pageParam:{key:"value"}})}function toast(){api.toast({msg:"此功能暂未开通，敬请期待~",duration:2e3,location:"middle"})}var dom={},vm=null;apiready=function(){init()}</script> </html>