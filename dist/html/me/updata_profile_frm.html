<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css></style> </head> <body> <section class=aui-content-padded id=app v-cloak> <div class=aui-card-list style="width:100%;height:7.5rem;box-shadow:#d6e0ea 0 0 10px"> <textarea class=aui-padded-15 style=width:100%;height:80% maxlength=30 v-model=desc @input=descInput @keyup.enter=postProfile></textarea> <span class="aui-font-size-14 aui-pull-right aui-margin-r-15">{{desc.length}}/30</span> </div> </section> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},vm=new Vue({el:"#app",data:{desc:$api.getStorage("profile")?$api.getStorage("profile"):"请简单介绍下自己",friendInfo:{}},methods:{descInput:function(){console.log(this.desc)},postProfile:function(){""!=this.desc?sendSave():alert("请输入内容")}}}),initModule(),initEventListener()}function initModule(){}function initEventListener(){}function getData(){}function sendSave(){tea.showp("保存中...","请稍候"),api.ajax({url:website+"chsysset.php?action=chinfo",method:"post",timeout:30,data:{values:{ID:$api.getStorage("ID"),token:$api.getStorage("token"),profile:vm.desc}}},function(e,t){return api.hideProgress(),e?"ok"==e.succ?(api.sendEvent({name:"save_personal_data"}),api.closeWin(),!0):void api.toast({msg:e.msg,duration:2e3,location:"middle"}):(tea.toast("ajax"),!1)})}var dom={},vm=null;apiready=function(){init()}</script> </html>