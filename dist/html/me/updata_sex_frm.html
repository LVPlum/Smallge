<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css></style> </head> <body> <div id=app class=aui-content style=margin-top:1rem v-cloak> <ul class=aui-list> <li class=aui-list-item tapmode @click=sexActive(1)> <div class=aui-list-item-inner> <div class="aui-list-item-title tea-text-title">男</div> <div v-if=" sex == 'male' " class="aui-iconfont aui-icon-correct tea-text-red" style=font-weight:700></div> </div> </li> <li class=aui-list-item tapmode @click=sexActive(0)> <div class=aui-list-item-inner> <div class="aui-list-item-title tea-text-title">女</div> <div v-if=" sex == 'female' " class="aui-iconfont aui-icon-correct tea-text-red" style=font-weight:700></div> </div> </li> </ul> </div> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},initModule(),initEventListener()}function initModule(){}function initEventListener(){api.addEventListener({name:"saveSex"},function(e,t){vm.sex!=data.sex?(showp("数据处理中...",""),api.ajax({url:website+"user_api.php?action=edit",method:"post",timeout:30,data:{values:{ID:vm.ID,sex:vm.sex}}},function(e,t){return api.hideProgress(),e?1==e.succ?($api.setStorage("sex",vm.sex),$api.setStorage("is_set_sex","1"),api.sendEvent({name:"save_personal_data"}),api.closeWin(),!0):void 0:(tea.toast("ajax"),!1)})):api.closeWin()})}var dom={},data={},vm=null;apiready=function(){data={sex:$api.getStorage("sex"),ID:$api.getStorage("ID"),token:$api.getStorage("token")},vm=new Vue({el:"#app",data:{sex:data.sex,ID:data.ID,token:data.token},methods:{sexActive:function(e){vm.sex=e?"male":"female"}},watch:{}}),init()}</script> </html>