<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>.boxShadow{border-radius:.2rem;-moz-box-shadow:0 .1rem .5rem #c6e2f1;-webkit-box-shadow:0 .1rem .5rem #c6e2f1;box-shadow:0 .1rem .5rem #c6e2f1}.avatar{width:3rem;height:3rem}.flexStart{-webkit-justify-content:flex-start!important;justify-content:start!important}.saveBtn{width:65%;height:2.3rem;line-height:2.3rem;background:#fff;margin:1rem auto 0;text-align:center;border-radius:46px 46px 46px 46px;border:solid 1px rgba(204,204,204,1)}</style> </head> <body> <div id=app v-cloak> <div class="aui-card-list aui-content-padded boxShadow"> <div class="aui-card-list-header flexStart" style="padding:1rem .75rem 0"> <div class=avatar> <img class=aui-img-round :src=avatar> </div> <p class="aui-margin-l-15 aui-font-size-16 tea-text-title">{{ nickname }}</p> </div> <div style=padding-bottom:2rem> <img :src="code ? code : '../../image/me/default_code.jpg' " alt=二维码 style="margin:0 auto"> </div> </div> <div class="saveBtn tea-text-title" tapmode @click=saveCode>保存到相册</div> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){dom={},vm=new Vue({el:"#app",data:{avatar:$api.getStorage("img")?$api.getStorage("img"):"../../image/me/default_famale.png",nickname:$api.getStorage("nickname")?$api.getStorage("nickname"):"昵称",code:""},methods:{saveCode:function(){api.require("FNScanner").encodeImg({content:"adf:"+$api.getStorage("telphone"),saveToAlbum:!0,saveImg:{w:400,h:400}},function(e,t){e.status?api.toast({msg:"保存成功"}):alert(JSON.stringify(t))})}},computed:{}}),initModule(),initEventListener()}function initModule(){api.require("FNScanner").encodeImg({content:"adf:"+$api.getStorage("telphone"),saveImg:{path:"fs://myqrcode.png",w:300,h:300}},function(e,t){e.status?vm.code=e.imgPath:alert(JSON.stringify(t))})}function initEventListener(){}function getData(){}var dom={},vm=null;apiready=function(){init()}</script> </html>