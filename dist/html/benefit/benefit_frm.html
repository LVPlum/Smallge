<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="teletel=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{height:100%;overflow:auto}.aui-list .aui-list-item{padding:0;margin:.75rem}.aui-list .aui-list-item-media{width:5rem;height:5rem;padding:0}.tea-column{flex-direction:column!important;align-items:start!important;-webkit-align-items:flex-start!important}.tea-flex-center{display:flex;justify-content:center!important;align-items:center!important}.tea-font-size-max{font-size:2.2rem!important}.tea-bg-deep-orange{background-color:#f63}.tea-bg-purple{background-color:#5c78cd}.tea-content-semicircle:after,.tea-content-semicircle:before{content:"";width:.375rem;height:.75rem;position:absolute;margin-top:-.375rem;background:#f2f5f8;z-index:1}.tea-content-semicircle:before{left:-1px;top:50%;border-radius:0 100% 100% 0/50%}.tea-content-semicircle:after{right:-1px;top:50%;border-radius:100% 0 0 100%/50%}.tea-content-border-dotted:before{content:"";width:2px;height:5rem;background-position:left;background-image:linear-gradient(0,#ededed 50%,#fff 50%,transparent 50%);background-size:1px 8px;position:absolute;left:0}.tea-content-border-sawtooth:after{content:"";width:3px;height:5rem;background-size:3px 5px;background-repeat:repeat-y;background-position:0 100%;position:absolute;right:0}.tea-content-border-sawtooth-blue:after{background-image:-webkit-gradient(radial,0 40%,1,0 50% ,5,from(#39f),color-stop(50%,#39f),color-stop(50%,#fff),to(#fff))}.tea-content-border-sawtooth-yellow:after{background-image:-webkit-gradient(radial,0 40%,1,0 50% ,5,from(#fc3),color-stop(50%,#fc3),color-stop(50%,#fff),to(#fff))}.tea-content-border-sawtooth-deep-orange:after{background-image:-webkit-gradient(radial,0 40%,1,0 50% ,5,from(#f63),color-stop(50%,#f63),color-stop(50%,#fff),to(#fff))}.tea-content-border-sawtooth-purple:after{background-image:-webkit-gradient(radial,0 40%,1,0 50% ,5,from(#5c78cd),color-stop(50%,#5c78cd),color-stop(50%,#fff),to(#fff))}.tea-text-white-money{margin-left:1.2rem}.tea-text-white-money:before{content:'￥';color:#fff;font-size:.8rem;margin-left:-1.8rem;font-weight:400}.banner{height:6.5rem;background-image:url(../../image/benefit/benefit_img@2x.png);background-size:100% 100%;margin:.5rem;position:relative}.block{width:3.975rem;height:3.975rem;text-align:center;background-size:100% 100%;position:absolute;right:1rem;top:-.5rem}.sign{background-image:url(../../image/benefit/benefit_sign@2x.png)}.unsign{background-image:url(../../image/benefit/benefit_unsign@2x.png)}.tips{position:absolute;right:3px;bottom:3px;font-size:.6rem;font-weight:700}</style> </head> <body> <div id=app class="aui-content aui-margin-b-15" v-cloak> <div class=banner tapmode @click=openFrm> <div :class="lastCheck == 0 ? 'sign' : 'unsign' " class=block></div> <p v-if=isApple() class="tips aui-text-white">本活动与苹果公司无关</p> </div> <ul class="aui-list aui-media-list tea-bg-default aui-list-noborder" id=benefit_list> <li v-for="(value,index) in list" class="aui-list-item tea-bg-white" tapmode @click=goApply(value.coupon_type,value)> <div class="aui-media-list-item-inner tea-content-semicircle"> <div v-if="value.coupon_type == 'vip' " class="aui-list-item-media tea-bg-yellow tea-flex-center tea-content-border-sawtooth tea-content-border-sawtooth-yellow"> <div class="aui-text-white tea-text-white-money tea-font-size-max" style=width:2rem;font-weight:700;text-align:center>{{ parseFloat(value.coupon_m) }}</div> </div> <div v-else-if="value.coupon_type == 'bx'" class="aui-list-item-media tea-bg-deep-orange tea-flex-center tea-content-border-sawtooth tea-content-border-sawtooth-deep-orange"> <div class="aui-text-white tea-text-white-money tea-font-size-max" style=width:2rem;font-weight:700;text-align:center>{{ parseFloat(value.coupon_m) }}</div> </div> <div v-else-if="value.coupon_type == 'hf'" class="aui-list-item-media tea-bg-purple tea-flex-center tea-content-border-sawtooth tea-content-border-sawtooth-purple"> <div class="aui-text-white tea-text-white-money tea-font-size-max" style=width:2rem;font-weight:700;text-align:center>{{ parseFloat(value.coupon_m) }}</div> </div> <div v-else class="aui-list-item-media tea-bg-blue tea-flex-center tea-content-border-sawtooth tea-content-border-sawtooth-blue"> <div class="aui-text-white tea-text-white-money tea-font-size-max" style=width:2rem;font-weight:700;text-align:center>{{ parseFloat(value.coupon_m) }}</div> </div> <div class=aui-list-item-inner style="padding:.75rem .75rem 0 .75rem"> <div class=aui-list-item-text> <div class="aui-list-item-title aui-font-size-14 tea-text-title">{{ value.readme }}</div> </div> <div class="aui-list-item-text tea-column"> <p v-for="(val,i) in value.content" class="aui-ellipsis aui-font-size-12 tea-text-gray">{{ val }}</p> </div> <div class=aui-list-item-text> <p class="aui-ellipsis aui-font-size-12 tea-text-gray">有效期至：{{ value.end_time.split(" ")[0] }}</p> </div> </div> <div class="aui-list-item-media tea-content-border-dotted tea-flex-center" style=width:2.2rem> <div class="tea-text-blue aui-font-size-12" style=width:.6rem>立即使用</div> </div> </div> </li> </ul> <p class="tea-text-blue aui-font-size-14 aui-pull-right" style=margin-right:.75rem tapmode onclick=openWinPastdata()>已过期失效的券></p> <section v-if="list.length == 0" id=nothing class=tea-nothing style=margin-top:5rem> <img src=../../image/nothing.png> <p>您还没有任何现金券哦~</p> </section> </div> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/vue.min.js></script> <script>function initVar(){dom={},data={},values={},vm=new Vue({el:"#app",data:{lastCheck:0,list:[]},methods:{openFrm:function(){0==getCheck()?this.openFrmDial():this.openWinIntegral()},openFrmDial:function(){api.openFrame({name:"dial_frm",url:"./dial_frm.html",rect:{x:0,y:0,w:"auto",h:"auto"},pageParam:{name:"dial_frm"},bgColor:"rgba(0,0,0,0.6)",vScrollBarEnabled:!1,hScrollBarEnabled:!1})},openWinIntegral:function(){api.openWin({name:"integral_win",url:"../me/integral_win.html",pageParam:{name:"pageparamname"}})},goApply:function(a,e){switch(a){case"vip":case"bx":tea.openWin({name:"vip_win",url:"../vip/vip_win.html",pageParam:{name:"pageparamname"}});break;case"hf":tea.openWin({name:"phone_pay_win",url:"../wallet/phone_pay_win.html",pageParam:{name:"pageparamname"}});break;case"sc":api.openFrame({name:"coupon_sc_code_frm",url:"./coupon_sc_code_frm.html",rect:{x:0,y:0,w:"auto",h:"auto"},pageParam:{coupon:e},bgColor:"rgba(0,0,0,0.6)",vScrollBarEnabled:!1,hScrollBarEnabled:!1});break;default:api.toast({msg:"您的版本较低，请升级到最新版本后使用",duration:2e3,location:"middle"})}},isApple:function(){return"ios"==api.systemType}}}),updateHTML()}function initModule(){}function initEventListener(){api.addEventListener({name:"lotteryOK"},function(a,e){getCheck(),getData()})}function getData(){showp("数据加载中···"),api.ajax({url:website+"api_cj.php?action=my_coupon",method:"post",data:{values:{userid:$api.getStorage("ID"),state:"2"}}},function(a,e){if(api.hideProgress(),!a)return!1;a&&(vm.list=a)})}function getCheck(){return showp("加载中"),api.ajax({url:website+"api_cj.php?action=check",method:"post",timeout:30,data:{values:{userid:$api.getStorage("ID")}}},function(a,e){if(api.hideProgress(),!a)return tea.toast("ajax"),!1;a&&(vm.lastCheck=a.lastcheck)}),vm.lastCheck}function updateVar(){}function updateDom(){}function updateHTML(){}function openWinPastdata(){api.openWin({name:"benefit_pastdata_win",url:"./benefit_pastdata_win.html",pageParam:{name:"benefit_pastdata_win"}})}var dom={},data={},values={},vm=null;apiready=function(){initVar(),initModule(),initEventListener(),getData(),getCheck()}</script> </html>