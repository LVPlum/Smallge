<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{background-color:#fff;color:#333}.aui-col-xs-4{display:table}.money-type{width:100%;height:3.15rem;text-align:center;color:#999;border:1px solid #999;border-radius:.25rem;display:table-cell;vertical-align:middle}.active-money-type{color:#39f;border:1px solid #39f}.money-checked{background-color:#39f;color:#fff}.aui-btn-block{height:2.2rem;line-height:2.2rem;font-size:.8rem;font-weight:100}</style> </head> <body> <div id=app v-cloak> <div class="aui-content aui-margin-b-15"> <div class=aui-card-list-content-padded> <div class=aui-list-item-inner> <div class="aui-list-item-title aui-margin-b-10 aui-margin-t-15 tea-text-gray">请选择充值金额</div> <div class="aui-row aui-row-padded"> <div v-for="(val,i) in item" class=aui-col-xs-4 @click=checkOn(val)> <div class="money-type active-money-type" :class="index == val.itemid ? 'money-checked' : '' "> <div class=aui-font-size-16>{{ val.price }}</div> <div class=aui-font-size-12>到账：{{ val.actual }}元</div> </div> </div> </div> </div> </div> </div> <footer style="margin:0 2rem" @click=submit> <div class="aui-btn aui-btn-block aui-text-white tea-btn-radius" :class="index == '' ? 'tea-bg-light-blue' : 'tea-bg-blue' ">确定充值</div> </footer> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script src=../../script/fastclick.min.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){vm=new Vue({el:"#app",data:{item:[{itemid:"1",price:"100.00",actual:"101.00",count:"11"},{itemid:"2",price:"100.00",actual:"101.00",count:"11"}],index:"",pageParam:null,saveUrl:"",title:"",type:""},methods:{checkOn:function(a){vm.index=a.itemid},submit:function(){""!=vm.index?(api.pageParam.cardno?(vm.saveUrl="oil_api.php?action=charge",vm.title="支付油卡充值",vm.pageParam={ID:$api.getStorage("ID"),cardno:api.pageParam.cardno,charge_item:vm.index}):(vm.saveUrl="oil_api.php?action=save",vm.title="支付油卡办理",vm.pageParam=api.pageParam,vm.pageParam.ID=$api.getStorage("ID"),vm.pageParam.charge_item=vm.index),saveOrder(vm.saveUrl,vm.pageParam)):api.toast({msg:"请选择要充值的项目",duration:2e3,location:"middle"})}},computed:{}}),getData(),initModule(),initEventListener()}function initModule(){}function initEventListener(){}function getData(){api.ajax({url:website+"oil_api.php?action=charge_item",method:"post",timeout:30},function(a,e){if("1"==a.succ)return vm.item=a.data,!0})}function saveOrder(a,e){api.ajax({url:website+a,method:"post",timeout:30,data:{values:e}},function(a,e){"1"==a.succ&&api.openWin({name:"pay_win",url:"../pay/pay_win.html",pageParam:{title:vm.title,money:a.data.money,type:"oil",values:{payid:a.data.payid,paymoney:a.data.money,mtype:a.data.mtype}}})})}function toPay(a){api.openWin({name:"pay_win",url:"../pay/pay_win.html",pageParam:vm.pageParam})}var vm=null;apiready=function(){init()}</script> </html>