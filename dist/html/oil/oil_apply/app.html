<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title></title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#ccc}input:-moz-placeholder,textarea:-moz-placeholder{color:#ccc}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#ccc}.aui-list .aui-list-item-label.icon{width:1.15rem;height:1.15rem}.btn{width:1rem!important;height:1rem!important;vertical-align:sub!important;margin-left:.5rem}*{background-image:none!important}.aui-btn-block{height:2.2rem;line-height:2.2rem;font-size:.8rem;font-weight:100}</style> </head> <body> <div id=app v-cloak> <ul class="aui-list aui-media-list"> <li class="aui-list-item aui-padded-0"> <div class=aui-media-list-item-inner> <div class="aui-list-item-inner aui-padded-l-15"> <div class=aui-info style=padding:0> <div class="aui-list-item-label icon"> <img :src="card_brand == 'cnpc' ? '../../image/oil/icon_cnpc.png' : '../../image/oil/icon_sg.png' " class=aui-img-round> </div> <div class="aui-list-item-input aui-font-size-16 tea-font-weight-bold tea-text-title"> {{card_brand == 'cnpc' ? '中国石油' : '中国石化'}}·{{card_type == 'petrol' ? '汽油卡' : '柴油卡' }} </div> </div> </div> </div> </li> </ul> <input-plate :province=province v-model=number @updata=updataMsg></input-plate> <input-time :time=time @updata=updataMsg></input-time> <input-option :checked=checkedOn :config=optionConfig @checked=checked></input-option> <div v-show="checkedOn == '1' " class=aui-list> <div class=aui-list-item> <div class="aui-info aui-padded-0"> <div class="aui-info-item aui-font-size-16 tea-text-title"> <span>店铺地址</span> <span class=aui-margin-l-10>{{store}}</span> </div> </div> </div> <div class=aui-list-item> <div class="aui-info aui-padded-0"> <div class="aui-info-item aui-font-size-16 tea-text-title"> <span>手机号码</span> <span class=aui-margin-l-10> <input type=tel placeholder=请输入您的手机号码 maxlength=11 v-model=tel> </span> </div> </div> </div> </div> <site v-show="checkedOn == '2' " :address=address @updata=updataMsg></site> <footer style=margin:2rem @click="goto('recharge')"> <div class="aui-btn aui-btn-block aui-text-white tea-btn-radius" :class="errorMsg ? 'tea-bg-light-blue' : 'tea-bg-blue' ">下一步</div> </footer> </div> <script type="text/javascript" src="../../html/oil/oil_apply/app.js"></script></body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script src=../../script/fastclick.min.js></script> <script src=../../script/vue.min.js></script> <script src=../../script/tea.js></script> <script type=text/template id=template> </script> <script>function init(){vm=new Vue({el:"#app",data:{province:"桂E",number:"",time:"2017-01-10 10点",tel:"",address:"",index:0,checkedOn:"",store:"合浦还珠南路小马哥审车处",card_brand:api.pageParam.card_brand,card_type:api.pageParam.card_type},methods:{goto:function(e){switch(e){case"province":openWinPlateProvince();break;case"plate":openWinPlateNum();break;case"date":openWinDateSelect();break;case"address":openWinAddress(vm.address.addrid);break;case"recharge":openWinRecharge()}},checked:function(e){vm.checkedOn=e}},computed:{errorMsg:function(){var e=new tea.checkRule;return e.add(this.number,[{condition:"isNoEmpty",errorMsg:"请输入车牌号码"}]),e.add(this.time,[{condition:"isNoEmpty",errorMsg:"请选择预约时间"}]),e.add(this.checkedOn,[{condition:"isNoEmpty",errorMsg:"请选择取卡方式"}]),"1"==this.checkedOn&&e.add(this.tel,[{condition:"isPhone",errorMsg:"请输入手机号码"}]),"2"==this.checkedOn&&e.add(this.address,[{condition:"isNoEmpty",errorMsg:"请选择地址"}]),e.start()}},watch:{}}),getData(),initModule(),initEventListener()}function initModule(){}function initEventListener(){}function getData(){api.ajax({url:website+"oil_api.php?action=index",method:"post",timeout:30,data:{values:{ID:$api.getStorage("ID")}}},function(e,a){if("1"==e.succ)return vm.province=e.data.carnum.slice(0,2),vm.number=e.data.carnum.slice(2),vm.time=e.data.booktime,vm.address=e.data.address,!0})}function openWinRecharge(){vm.errorMsg?api.toast({msg:vm.errorMsg,duration:2e3,location:"middle"}):api.openWin({name:"oil_recharge_win",url:"./oil_recharge_win.html",pageParam:{carnum:vm.province+vm.number,booktime:vm.time,card_brand:vm.card_brand,card_type:vm.card_type,way:vm.checkedOn,store_address:vm.store,tel:vm.tel,addrid:vm.address.addrid}})}function getAddressDetail(e){tea.showp("加载中..."),api.ajax({url:website+"exempt_api.php?action=addrinfo",method:"post",timeout:30,data:{values:{ID:$api.getStorage("ID"),addrid:e}}},function(e,a){api.hideProgress(),"1"==e.succ&&(vm.address=e.data)})}var vm=null</script> </html>