<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title>title</title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{height:100%;overflow:auto}footer .aui-btn{display:block;width:90%;margin:.75rem auto;height:2.2rem;line-height:2.2rem;border-radius:1.1rem}</style> </head> <body> <ul id=insure-list class="aui-list aui-list-in"> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 车船税<span class="aui-margin-l-10 tea-text-gray tea-font-size-11">规定</span> </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox checked=checked> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 交强险<span class="aui-margin-l-10 tea-text-gray tea-font-size-11">规定</span> </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox checked=checked> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 座位险<span class="aui-margin-l-10 tea-text-gray tea-font-size-11">规定,根据该车核载人数</span> </div> <div class=aui-list-item-right> <span class="aui-font-size-12 aui-margin-r-15 tea-text-title tea-text-arrow-down" tapmode onclick=openFrameUiPicker()>30万/座</span> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 第三者责任险<span class="aui-margin-l-10 tea-text-gray tea-font-size-11">规定</span> </div> <div class=aui-list-item-right> <span class="aui-font-size-12 aui-margin-r-15 tea-text-title tea-text-arrow-down" tapmode onclick=openFrameUiPicker()>100万</span> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 车损险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 全车盗抢险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 玻璃险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 划痕险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 自燃险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 车损找不到第三方 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 涉水险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-title> 车辆损失险 </div> <div class=aui-list-item-right> <input type=checkbox class=aui-checkbox> </div> </div> </li> </ul> <footer> <div class="aui-btn tea-active" tapmode onclick=postInsure()>提交投保报价</div> </footer> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/doT.min.js></script> <script type=text/template id=template> {{~it:value:index}}
    <li class="aui-list-item" tapmode onclick="selectInsure({{=index}})">
        <div class="aui-list-item-inner">
            <div class="aui-list-item-title">
                {{=value.item}}<span class="aui-margin-l-10 tea-text-gray tea-font-size-11" >{{=value.remark}}</span>
            </div>
            <div class="aui-list-item-right">
                {{?value.options}}
                <span id="option{{=index}}" class="aui-font-size-12 aui-margin-r-10 tea-text-title tea-text-arrow-down" tapmode onclick="openFrameUiPicker(event,'{{=index}}')">
                    {{=value.options[0]}}
                </span>
                {{?}}
                <label class="aui-checkbox {{=(value.value == 1 || value.set == 1? 'aui-checked' : '')}}"></label>
            </div>
        </div>
    </li>
    {{~}} </script> <script>function initDOM(){dom.insureList=$api.byId("insure-list")}function initVar(){values=api.pageParam.values;for(var a=(data=tea.objToArr(api.pageParam.data)).length-1;a>=0;a--){var e=data[a].id;values[e]=data[a].value,void 0!==data[a].options&&(data[a].options=data[a].options.split(","),option[e]=data[a].options[0])}order=api.pageParam.order,"undefined"!=typeof order&&updateVar()}function initHTML(){tea.doT(data,"template","insure-list")}function initEventListener(){api.addEventListener({name:"pickerSure"},function(a,e){if(a){var i=a.value.index,t=data[i].id;option[t]=a.value.option,$api.byId("option"+i).innerHTML=option[t];var n=dom.insures[i];$api.addCls(n,"aui-checked")}})}function initModule(){}function getData(){}function updateDOM(){dom.insures=$api.domAll(dom.insureList,".aui-checkbox")}function updateVar(){var a=[];for(var e in order.insurance_item)a.push(order.insurance_item[e].id);for(var i=0;i<data.length;i++)a.indexOf(data[i].id)>-1?data[i].set=1:data[i].set=0;values.id=order.ID,values.able=1}function updateHTML(){}function sendEvent(){}function closeWin(){api.closeWin()}function openFrameUiPicker(a,e){options_=data[e].options,option_=options_[0],a.stopPropagation(),api.sendEvent({name:"optionsChange",extra:{index:e,options:options_}}),api.openFrame({name:"ui_picker_frm",url:"../unit/ui_picker_frm.html",rect:{x:0,y:0,w:"auto",h:api.winHeight},pageParam:{index:e,options:options_,option:option_},bounces:!1,bgColor:"rgba(0,0,0,0.6)",vScrollBarEnabled:!0,hScrollBarEnabled:!0})}function selectInsure(a){if(1==data[a].value)api.toast({msg:"该保险为必选项~",duration:2e3,location:"middle"});else{var e=dom.insures[a];tea.toggle(e,"aui-checked")}}function postInsure(){for(var a=dom.insures.length-1;a>=0;a--){var e=dom.insures[a],i=data[a].id;$api.hasCls(e,"aui-checked")?void 0===data[a].options?values[i]=1:values[i]=option[i]:values[i]=0}values.userid=$api.getStorage("ID"),values.cjh=values.licenseNum,values.xm=values.realName,values.sfz=values.idNum,values.cph=values.plate,tea.showp("","数据发送中",!0),api.ajax({url:website+"api_q.php?action=post_insurance",method:"post",data:{values:values}},function(a,e){api.hideProgress(),a?api.openWin({name:"successInsure",url:"../unit/success_win.html",pageParam:{title:"汽车保险",result:"提交成功",data:{0:["您提交的投保报价 我们已经收到","小马哥会有专员","在国家法定上班时间1小时内","通过短信或电话联系您","请保持手机畅通"]}}}):tea.toast("fail")})}apiready=function(){initDOM(),initVar(),initHTML(),initEventListener(),initModule(),getData(),updateDOM()};var dom={},data={},values={},option={},toast=new auiToast</script> </html>