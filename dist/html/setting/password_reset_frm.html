<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <meta name=format-detection content="telephone=no,email=no,date=no,aItemress=no"> <title>重置密码</title> <link rel=stylesheet type=text/css href=../../css/api.css /> <link rel=stylesheet type=text/css href=../../css/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui-skin.css /> <link rel=stylesheet type=text/css href=../../css/tea.css /> <style type=text/css>body,html{height:100%;overflow:auto}</style> </head> <body> <section class=aui-content style=margin-bottom:3rem> <ul class="aui-list aui-form-list aui-list-noborder"> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-label> 原密码 </div> <div class=aui-list-item-input> <input id=old-password type=password placeholder=请输入您原来的密码> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-label> 新密码 </div> <div class=aui-list-item-input> <input id=new-password type=password placeholder=请设置新密码(不少于6位)> </div> </div> </li> <li class=aui-list-item> <div class=aui-list-item-inner> <div class=aui-list-item-label> 确认密码 </div> <div class=aui-list-item-input> <input id=sure-password type=password placeholder=请再次填写确认新密码> </div> </div> </li> </ul> </section> <section class=aui-content-padded> <div class="aui-btn aui-btn-block aui-btn-info tea-btn-radius" tapmode onclick=post()>确认提交</div> </section> </body> <script src=../../script/api.js></script> <script src=../../script/aui-toast.js></script> <script src=../../script/tea.js></script> <script src=../../script/conn.js></script> <script src=../../script/doT.min.js></script> <script type=text/template id=template></script> <script>function initDOM(){}function initVar(){}function initHTML(){}function initEventListener(){}function initModule(){}function getData(){}function updateDOM(){}function updateVar(){}function updateHTML(){}function sendEvent(){}function post(){var e=check();"string"!=typeof e?api.ajax({url:website+"chpassword.php",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{token:$api.getStorage("token"),curpass:values.old,newpass:values.new}}},function(e,a){if(e){if("0"==e.succ)return tea.toast("fail",e.msg),!1;api.openWin({name:"success",url:"../unit/success_win.html",pageParam:{title:"修改密码",result:e.msg,data:{0:[""]}}})}else tea.toast("ajax")}):tea.toast("fail",e)}function check(){var e=$api.byId("old-password");values.old=$api.val(e);var a=$api.byId("new-password");values.new=$api.val(a);var t=$api.byId("sure-password");values.sure=$api.val(t);return values.old.length<6?"原密码长度不足":tea.checkChinese(values.old)?"原密码</br>不能使用中文":values.new.length<6?"新密码长度</br>必须大于6":tea.checkChinese(values.new)?"新密码</br>不能使用中文":values.new===values.old?"新旧密码不能相同":values.new===values.sure||"两次密码不一致"}apiready=function(){initDOM(),initVar(),initHTML(),initEventListener(),initModule(),getData()};var dom={},data={},values={}</script> </html>