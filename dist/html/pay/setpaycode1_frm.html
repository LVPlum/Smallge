<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta name=viewport content="maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width,initial-scale=1"/> <title></title> <link rel=stylesheet type=text/css href=../../css/aui18/aui.css /> <link rel=stylesheet type=text/css href=../../css/aui18/common.css /> </head> <style type=text/css></style> <body> <p class=aui-text-center>设置支付密码，必需要通过验证手机号码</p> <div class="aui-content aui-card"> <div class=aui-form> <div class=aui-input-row> <i class="aui-input-addon aui-iconfont aui-icon-mobile aui-text-info"></i> <input type=tel class=aui-input id=mobilenum readonly=readonly> </div> <div class=aui-input-row> <input type=tel class=aui-input id=code placeholder=请输入收到的验证码 /> <span class=aui-input-addon> <div class=aui-btn id=sendVerify tapmode onclick=beverify()>获取验证码</div> </span> </div> <div class=aui-btn-row> <div class="aui-btn aui-btn-block aui-btn-warning" tapmode onclick=checkmobile()>下一步</div> </div> </div> </div> </body> <script src=../../script/api.js></script> <script src=../../script/conn.js></script> <script>function checkmobile(){var e=$api.val($api.byId("mobilenum")),a=$api.val($api.byId("code"));showp("正在验证数据中...","请稍候..."),api.ajax({url:website+"verifysmspaycode.php",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{phonenum:e,smscode:a}}},function(e,a){e&&(e.errmsg||("no"==e.succ?api.alert({msg:e.msg}):api.openWin({name:"setpaycode2_win",url:"setpaycode2_win.html"}),api.hideProgress()))})}function beverify(){var e=$api.val($api.byId("mobilenum"));api.ajax({url:website+"sendsmscode.php?checknum=2",method:"post",timeout:30,dataType:"json",returnAll:!1,data:{values:{phonenum:e}}},function(e,a){e?e.errmsg||("no"==e.succ?api.alert({msg:e.msg}):get_verify()):api.alert({msg:"错误码："+a.code+"；错误信息："+a.msg+"网络状态码："+a.statusCode})})}function get_verify(){var e=$api.byId("sendVerify");$api.removeAttr(e,"onclick"),$api.html(e,'<span id="GetVerify">120</span>S'),times=119,isinerval=setInterval("CountDown()",1e3),setTimeout(function(){$api.val($api.byId("code"),"")},500)}function CountDown(){if(times<1){var e=$api.byId("sendVerify");return $api.attr(e,"onclick","get_verify()"),$api.html(e,"重新获取"),void clearInterval(isinerval)}var a=$api.byId("GetVerify");$api.html(a,""+times),times--}apiready=function(){api.parseTapmode(),$api.val($api.byId("mobilenum"),$api.getStorage("telphone"))}</script> </html>